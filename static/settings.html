<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Settings</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				margin: 0;
				padding: 0;
				text-align: center;
				font-family:
					-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
					Cantarell, sans-serif;
				background-color: #0a0a0a;
				color: #e0def4;
				min-height: 100vh;
			}

			.settings-container {
				max-width: 800px;
				margin: 0 auto;
				padding: 2rem;
			}

			.settings-header {
				text-align: center;
				margin-bottom: 3rem;
			}

			.settings-header h1 {
				color: #ff8c00;
				font-size: 2.5rem;
				margin-bottom: 0.5rem;
				text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
			}

			.settings-section {
				margin-bottom: 2.5rem;
				padding: 2rem;
				background: linear-gradient(135deg, #1a1a1a 0%, #151515 100%);
				border: 2px solid rgba(255, 140, 0, 0.2);
				border-radius: 1rem;
				box-shadow: 0 4px 15px rgba(255, 140, 0, 0.1);
				transition: all 0.3s ease;
			}

			.settings-section:hover {
				border-color: rgba(255, 140, 0, 0.4);
				box-shadow: 0 6px 20px rgba(255, 140, 0, 0.15);
			}

			.settings-section h3 {
				color: #ffa500;
				margin-bottom: 1.5rem;
				font-size: 1.4rem;
				text-transform: uppercase;
				letter-spacing: 1px;
			}

			.form-group {
				margin-bottom: 1.5rem;
				text-align: left;
			}

			.form-group label {
				display: block;
				margin-bottom: 0.8rem;
				color: #e0def4;
				font-weight: 600;
				font-size: 1rem;
			}

			select,
			input[type="text"],
			input[type="checkbox"] {
				width: 100%;
				padding: 12px 16px;
				background-color: #0d0d0d;
				border: 2px solid rgba(255, 140, 0, 0.3);
				border-radius: 0.8rem;
				color: #e0def4;
				font-family: inherit;
				font-size: 1rem;
				transition: all 0.3s ease;
			}

			input[type="checkbox"] {
				width: auto;
				margin-right: 0.5rem;
				cursor: pointer;
				accent-color: #ff8c00;
			}

			.checkbox-group {
				display: flex;
				align-items: center;
				gap: 0.8rem;
			}

			.checkbox-group label {
				margin-bottom: 0;
			}

			select:focus,
			input[type="text"]:focus,
			input[type="checkbox"]:focus {
				outline: none;
				border-color: #ff8c00;
				box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
				background-color: #1a1a1a;
			}

			select:hover,
			input[type="text"]:hover,
			input[type="checkbox"]:hover {
				border-color: rgba(255, 140, 0, 0.5);
			}

			.preview-section {
				margin-top: 1.5rem;
				padding: 1.5rem;
				background-color: rgba(255, 140, 0, 0.05);
				border: 1px solid rgba(255, 140, 0, 0.2);
				border-radius: 0.8rem;
				display: flex;
				align-items: center;
				gap: 1.5rem;
			}

			.preview-icon {
				width: 60px;
				height: 60px;
				background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
				border-radius: 0.8rem;
				display: flex;
				align-items: center;
				justify-content: center;
				overflow: hidden;
				flex-shrink: 0;
				box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3);
			}

			.preview-icon img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			.preview-info {
				text-align: left;
				flex: 1;
			}

			.preview-info h4 {
				color: #ffa500;
				margin-bottom: 0.3rem;
				font-size: 1.1rem;
			}

			.preview-info p {
				color: #999;
				font-size: 0.9rem;
			}

			.button-group {
				display: flex;
				gap: 1rem;
				justify-content: center;
				margin-top: 2rem;
				flex-wrap: wrap;
			}

			.settings-btn {
				padding: 12px 30px;
				background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
				border: none;
				border-radius: 0.8rem;
				color: #fff;
				font-size: 1rem;
				font-weight: 700;
				cursor: pointer;
				transition: all 0.3s ease;
				font-family: inherit;
				box-shadow: 0 4px 15px rgba(255, 140, 0, 0.3);
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.settings-btn:hover {
				transform: translateY(-3px);
				box-shadow: 0 6px 20px rgba(255, 140, 0, 0.5);
			}

			.settings-btn:active {
				transform: translateY(-1px);
			}

			.reset-btn {
				background: linear-gradient(135deg, #555 0%, #777 100%);
				box-shadow: 0 4px 15px rgba(85, 85, 85, 0.3);
			}

			.reset-btn:hover {
				box-shadow: 0 6px 20px rgba(85, 85, 85, 0.5);
			}

			.footer-text {
				text-align: center;
				font-size: 14px;
				text-shadow: 1px 1px 3px #000;
				color: #999;
				margin-top: 3rem;
			}
		</style>
	</head>
	<body>
		<div class="settings-container">
			<div class="settings-header">
				<h1>Settings</h1>
			</div>

			<!-- Preset Sites Section -->
			<div class="settings-section">
				<h3>Quick Site Selection</h3>
				<div class="form-group">
					<label for="site-select">Select an educational site:</label>
					<select id="site-select" onchange="selectSite()">
						<option value="">-- Choose a site --</option>
						<option value="google">Google</option>
						<option value="classroom">Google Classroom</option>
						<option value="clever">Clever</option>
						<option value="classlink">ClassLink</option>
						<option value="mathia">MATHIA (Carnegie Learning)</option>
						<option value="schoology">Schoology</option>
						<option value="aspen">Aspen</option>
					</select>
				</div>
			</div>

			<!-- Custom Settings Section -->
			<div class="settings-section">
				<h3>Custom Customization</h3>
				<div class="form-group">
					<label for="custom-title">Custom Page Title:</label>
					<input
						type="text"
						id="custom-title"
						placeholder="Enter custom title (e.g., YouTube, Google, GitHub)"
						onchange="updateCustom()"
					/>
				</div>
				<div class="form-group">
					<label for="custom-favicon">Favicon URL:</label>
					<input
						type="text"
						id="custom-favicon"
						placeholder="Enter favicon URL (e.g., https://example.com/icon.png)"
						onchange="updateCustom()"
					/>
				</div>
			</div>

			<p class="footer-text">Â©2025 The Cheesy Proxy</p>
		</div>

		<script>
			// Educational sites presets
			const presets = {
				google: {
					title: "Google",
					favicon: "https://www.google.com/favicon.ico",
				},
				classroom: {
					title: "Home",
					favicon: "https://ssl.gstatic.com/classroom/favicon.png",
				},
				clever: {
					title: "Clever | Portal",
					favicon: "/favicons/clever-fav.webp",
				},
				classlink: {
					title: "My Apps",
					favicon: "/favicons/classlink-fav.ico",
				},
				mathia: {
					title: "Carnegie Learning",
					favicon: "/favicons/carnegielearning-fav.ico",
				},
				schoology: {
					title: "Home | Schoology",
					favicon: "/favicons/schoology-fav.ico",
				},
				aspen: {
					title: "Aspen: Pages",
					favicon: "/favicons/aspen-fav.ico",
				},
			};

			function selectSite() {
				const siteKey = document.getElementById("site-select").value;
				if (!siteKey) return;

				const site = presets[siteKey];

				// Update custom fields
				document.getElementById("custom-title").value = site.title;
				document.getElementById("custom-favicon").value = site.favicon;
				updateCustom();
			}

			function updateCustom() {
				const title = document.getElementById("custom-title").value.trim();
				const favicon = document.getElementById("custom-favicon").value.trim();

				// Change title globally
				if (title) {
					document.title = title;
					if (window.parent && window.parent !== window) {
						window.parent.document.title = title;
					}
				}

				if (favicon) {
					const bust = `${favicon}${favicon.includes("?") ? "&" : "?"}t=${Date.now()}`;

					// Change favicon in current window
					let faviconLink = document.querySelector('link[rel="icon"]');
					if (!faviconLink) {
						faviconLink = document.createElement("link");
						faviconLink.rel = "icon";
						faviconLink.type = "image/x-icon";
						document.head.appendChild(faviconLink);
					}
					faviconLink.href = bust;

					// Change favicon in parent window if in iframe
					if (window.parent && window.parent !== window) {
						let parentFaviconLink =
							window.parent.document.querySelector('link[rel="icon"]');
						if (!parentFaviconLink) {
							parentFaviconLink = window.parent.document.createElement("link");
							parentFaviconLink.rel = "icon";
							parentFaviconLink.type = "image/x-icon";
							window.parent.document.head.appendChild(parentFaviconLink);
						}
						parentFaviconLink.href = bust;
					}
				}

				// Store settings in localStorage
				localStorage.setItem("custom-title", title);
				localStorage.setItem("custom-favicon", favicon);
			}

			// Load settings from localStorage on page load
			window.addEventListener("DOMContentLoaded", () => {
				const savedTitle = localStorage.getItem("custom-title");
				const savedFavicon = localStorage.getItem("custom-favicon");

				if (savedTitle)
					document.getElementById("custom-title").value = savedTitle;
				if (savedFavicon)
					document.getElementById("custom-favicon").value = savedFavicon;
			});
		</script>
	</body>
</html>
