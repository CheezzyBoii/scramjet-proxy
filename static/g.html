<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Games</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				margin: 0;
				padding: 0;
				text-align: center;
				font-family:
					-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu,
					Cantarell, sans-serif;
				background-color: #0a0a0a;
				color: #e0def4;
				min-height: 100vh;
			}

			div {
				overflow-y: auto;
			}

			.games-container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 2rem;
			}

			.games-header {
				text-align: center;
				margin-bottom: 2rem;
			}

			.games-header img {
				max-width: 250px;
			}

			#gameCount {
				display: inline-block;
				padding: 15px 25px;
				background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
				color: white;
				border-radius: 200px;
				font-size: 1.1em;
				font-weight: 600;
				box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3);
				text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
				letter-spacing: 0.5px;
				margin: 1rem 0;
			}

			.search-box-container {
				text-align: center;
				margin-bottom: 15px;
			}

			.search-input {
				padding: 10px 20px;
				border: none;
				opacity: 95%;
				border-radius: 200px;
				outline: none;
				background: #f0fff0;
				color: #333;
				font-size: 1em;
				margin: 5px 0;
				box-shadow: 0 0 0 rgba(255, 140, 0, 0);
				transition:
					box-shadow 0.3s ease,
					transform 0.2s ease,
					background 0.3s ease;
				animation: fadeInSearch 0.6s ease-out;
			}

			@keyframes fadeInSearch {
				from {
					opacity: 0;
					transform: scale(0.95);
				}
				to {
					opacity: 1;
					transform: scale(1);
				}
			}

			.search-input:focus {
				background: #e8ffe8;
				box-shadow: 0 0 12px rgba(255, 140, 0, 0.4);
				transform: scale(1.05);
				outline: none;
			}

			.search-input:hover {
				background: #f5fff5;
				box-shadow: 0 0 8px rgba(255, 165, 0, 0.4);
			}

			.games-grid {
				text-align: center;
			}

			.button-container {
				display: inline-block;
				margin: 15px;
				padding: 15px 15px;
				background: #1a1a1a;
				border: 2px solid #ff8c00;
				border-radius: 20px;
				cursor: pointer;
				transition:
					background 0.4s ease,
					transform 0.2s ease,
					box-shadow 0.3s ease,
					border-color 0.3s ease;
				color: #fff;
				font-weight: 600;
				text-align: center;
				box-shadow: 0 0 10px rgba(255, 140, 0, 0.2);
				opacity: 0;
				transform: scale(0.95);
				transition:
					opacity 0.3s ease,
					transform 0.3s ease;
			}

			.button-container.show {
				opacity: 1;
				transform: scale(1);
			}

			.button-container:hover {
				background: #0a0a0a;
				border-color: #ffa500;
				transform: scale(1.025);
				box-shadow:
					0 8px 25px rgba(255, 140, 0, 0.4),
					0 0 20px rgba(255, 140, 0, 0.5);
			}

			.button-content {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 0.5rem;
				color: white;
				text-align: center;
			}

			.button-image {
				width: 200px;
				height: 200px;
				display: block;
				background-color: transparent;
				object-fit: contain;
				margin-bottom: 5px;
				border-radius: 15px;
			}

			.button-container span {
				font-size: 0.9rem;
				font-weight: 600;
				color: #fff;
			}

			.footer-buttons {
				text-align: center;
				margin-top: 2rem;
			}

			.button-container-footer {
				display: inline-block;
				padding: 12px 24px;
				background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
				border: none;
				border-radius: 200px;
				color: #fff;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3);
				margin: 0 5px;
			}

			.button-container-footer:hover {
				transform: translateY(-3px);
				box-shadow: 0 6px 15px rgba(255, 140, 0, 0.4);
			}

			.footer-text {
				text-align: center;
				font-size: 16px;
				text-shadow: 1px 1px 3px #000;
				color: #f0fff0;
				margin-top: 2rem;
			}
		</style>
	</head>
	<body>
		<div class="games-container">
			<div class="games-header">
				<img src="/devtoolsimgs/Logo.png" alt="Games Logo" />
				<br />
				<h2 id="gameCount" style="margin: 1rem 0">Games: 57</h2>
			</div>

			<div class="search-box-container">
				<input
					type="text"
					id="searchBox"
					class="search-input"
					placeholder="Search games..."
					onkeyup="filterGames()"
				/>
			</div>

			<div class="games-grid" id="game-list"></div>

			<p class="footer-text">Â©2025 The Cheese Proxy</p>
		</div>

		<script>
			let games = [];

			// Load games from JSON file
			fetch("g.json")
				.then((response) => response.json())
				.then((data) => {
					games = data;
					renderGames(games);
				})
				.catch((error) => {
					console.error("Error loading games:", error);
				});

			function openGame(gameUrl) {
				var win = window.open("", "_blank");

				win.document.write(`
<html>
  <head>
    <title>Ela Essay</title>
    <link rel="icon" href="extra/favicon.png" />
    <style>
      html, body {
        margin: 0; padding: 0; font-family: sans-serif; background: #0a0a0a; overflow: hidden;
      }
      #splash {
        position: fixed; width: 100%; height: 100%;
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        z-index: 500; transition: opacity 0.5s ease;
      }

      #splash img {
        max-width: 200px; max-height: 200px;
      }
      .progress-bar {
        width: 80%; height: 10px; background: #333; border-radius: 5px; margin-top: 20px; overflow: hidden;
      }
      .progress-bar-fill {
        height: 100%; width: 0; background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%); animation: fillBar 1s linear forwards;
      }
      @keyframes fillBar {
        100% { width: 100%; }
      }
      #mainContent {
        display: none;
      }
      .hover-zone {
        position: fixed; top: 0; left: 0; width: 100%; height: 20px; z-index: 10;
      }
      .button-box {
        position: fixed; top: -47px; left: 50%; transform: translateX(-50%);
        background-color: #1a1a1a; border-radius: 12px;
        box-shadow: 0 2px 10px rgba(255, 140, 0, 0.2);
        padding: 10px; display: flex; gap: 10px; transition: top 0.3s ease; z-index: 11;
        border: 2px solid rgba(255, 140, 0, 0.3);
      }
      .hover-zone:hover + .button-box,
      .button-box:hover {
        top: 0;
      }
      button {
        padding: 8px 14px; background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%); color: white; border: none; border-radius: 200px;
        cursor: pointer; font-size: 14px; white-space: nowrap; font-weight: 600;
      } 
        button:hover {
        box-shadow: 0 4px 12px rgba(255, 140, 0, 0.5);
        transform: translateY(-2px);
      }
      iframe#gameFrame {
        width: 100%; height: 100vh; border: none; display: block; position: absolute; top: 0; left: 0; z-index: 1;
      }
      #fakeScreen {
        display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
        background: #0a0a0a; z-index: 9; justify-content: center; align-items: center; font-size: 2em; color: #ff8c00;
      }
      body.dark {
        background: #0a0a0a; color: white;
      }
      body.dark .button-box {
        background: #1a1a1a;
      }
      body.dark #fakeScreen {
        background: #0a0a0a; color: #ff8c00;
      }
      #overlayContent {
        position: absolute; top: 0; left: 0; width: 100%; height: 100vh; z-index: 2;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div id="splash">
      <img
        src="/devtoolsimgs/Logo.png"
        alt="Logo"
      />
      <div class="progress-bar">
        <div class="progress-bar-fill"></div>
      </div>
    </div>

    <div id="mainContent">
      <div class="hover-zone"></div>
      <div class="button-box">
        <button onclick="window.close()">Close</button>
        <button onclick="panic()">Panic</button>
        <button id="hideBtn" onclick="hideGame()">Hide Game</button>
        <button id="unhideBtn" onclick="unhideGame()" style="display:none;">
          Unhide Game
        </button>
        <button id="sysInfoBtn" onclick="toggleSysInfo()">System Info</button>
      </div>
      <div id="fakeScreen">ELA Essay - Writing in Progress...</div>
    </div>

    <iframe
      id="gameFrame"
      src="${gameUrl}"
      allowtransparency="true"
      allowfullscreen
    ></iframe>

    <div id="overlayContent">
      <div
        id="sysInfo"
        style="
                position: fixed; top: 10px; left: 10px;
                background: rgba(0,0,0,0.9); color: #ff8c00;
                padding: 10px 14px; border-radius: 10px;
                font-size: 13px; line-height: 1.4;
                font-family: monospace;
                display: none; z-index: 20; border: 1px solid rgba(255, 140, 0, 0.3);"
      ></div>
    </div>

    <script>
      let sysInfoVisible = false;
      let fps = 0, lastFrame = performance.now(), frameCount = 0;
      const pageStart = performance.now();

      function toggleSysInfo() {
        const info = document.getElementById("sysInfo");
        sysInfoVisible = !sysInfoVisible;
        info.style.display = sysInfoVisible ? "block" : "none";
      }

      function updateSysInfo() {
        const info = document.getElementById("sysInfo");
        if (!info) return;

        const now = performance.now();
        frameCount++;
        if (now - lastFrame >= 1000) {
          fps = frameCount;
          frameCount = 0;
          lastFrame = now;
        }

        if (sysInfoVisible) {
          const uptime = ((now - pageStart) / 1000).toFixed(1);
          const cores = navigator.hardwareConcurrency || "N/A";
          const screenRes = window.screen.width + "x" + window.screen.height;
          const windowSize = window.innerWidth + "x" + window.innerHeight;
          const pixelRatio = window.devicePixelRatio || 1;

          let mem = "";
          try {
            if (performance.memory) {
              const used = (performance.memory.usedJSHeapSize / 1048576).toFixed(1);
              const total = (performance.memory.totalJSHeapSize / 1048576).toFixed(1);
              mem = "Memory: " + used + "MB / " + total + "MB\\n";
            }
          } catch(e) {}

          let net = "";
          try {
            if (navigator.connection) {
              const type = navigator.connection.effectiveType || "unknown";
              const down = navigator.connection.downlink || "?";
              net = "Network: " + type + " (" + down + " Mbps)\\n";
            }
          } catch(e) {}

          info.textContent =
            "FPS: " + fps + "\\n" +
            "CPU Cores: " + cores + "\\n" +
            mem +
            "Screen: " + screenRes + "\\n" +
            "Window: " + windowSize + "\\n" +
            "Pixel Ratio: " + pixelRatio + "\\n" +
            net +
            "Uptime: " + uptime + "s\\n" +
            "User Agent: " + navigator.userAgent;
        }

        requestAnimationFrame(updateSysInfo);
      }
      requestAnimationFrame(updateSysInfo);

                    let savedDocUrl = null;




                    function panic() {
                      window.open("https://classroom.google.com", "_blank");
                      window.close();
                    }

                    function hideGame() {
                      const docUrl = prompt("Paste your Google Doc link here (must start with https://docs.google.com):");

                      if (docUrl && docUrl.startsWith("https://docs.google.com")) {
                        savedDocUrl = docUrl;

                        const gameFrame = document.getElementById("gameFrame");
                        const fakeScreen = document.getElementById("fakeScreen");

                        // Create new iframe for Google Doc if not exists
                        let docFrame = document.getElementById("docFrame");
                        if (!docFrame) {
                          docFrame = document.createElement("iframe");
                          docFrame.id = "docFrame";
                          docFrame.style.position = "absolute";
                          docFrame.style.top = "0";
                          docFrame.style.left = "0";
                          docFrame.style.width = "100%";
                          docFrame.style.height = "100vh";
                          docFrame.style.border = "none";
                          docFrame.style.zIndex = "3";
                          document.body.appendChild(docFrame);
                        }
                        docFrame.src = savedDocUrl;

                        gameFrame.style.display = "none";
                        fakeScreen.style.display = "none";
                        docFrame.style.display = "block";

                        // Toggle buttons
                        document.getElementById("hideBtn").style.display = "none";
                        document.getElementById("unhideBtn").style.display = "inline-block";
                      } else {
                        alert("That doesn't look like a valid Google Doc link.");
                      }
                    }

                    function unhideGame() {
                      const gameFrame = document.getElementById("gameFrame");
                      const fakeScreen = document.getElementById("fakeScreen");
                      const docFrame = document.getElementById("docFrame");

                      if (docFrame) {
                        docFrame.style.display = "none";
                      }

                      gameFrame.style.display = "block";
                      fakeScreen.style.display = "none";

                      // Toggle buttons
                      document.getElementById("hideBtn").style.display = "inline-block";
                      document.getElementById("unhideBtn").style.display = "none";
                    }
    </scr'+'ipt>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => {
    const splash = document.getElementById("splash");
    const main = document.getElementById("mainContent");

    splash.style.transition = "opacity 0.5s ease";
    splash.style.opacity = "0";

    setTimeout(() => {
      splash.style.display = "none";
      main.style.display = "block";
    }, 500);

  }, 1500);
});
</scr'+'ipt>

  </body>
</html>

      `);

				win.document.close();
				win.onload = () => {
					const splash = win.document.getElementById("splash");
					const main = win.document.getElementById("mainContent");

					setTimeout(() => {
						splash.style.opacity = "0";

						setTimeout(() => {
							splash.style.display = "none";
							main.style.display = "block";
						}, 500);
					}, 1500);
				};
			}

			const container = document.getElementById("game-list");

			function renderGames(gameList) {
				if (!gameList || gameList.length === 0) return;

				container.innerHTML = "";
				const sortedGames = gameList
					.slice()
					.sort((a, b) =>
						a.name.toLowerCase().localeCompare(b.name.toLowerCase())
					);

				sortedGames.forEach((game, index) => {
					const div = document.createElement("div");
					div.className = "button-container";
					div.setAttribute("onclick", `openGame('${game.url}')`);
					div.innerHTML = `
          <div class="button-content">
            <img class="button-image" src="${game.image}" alt="${game.name}" onerror="this.style.display='none'">
            <span>${game.name}</span>
          </div>
        `;
					container.appendChild(div);
					setTimeout(() => div.classList.add("show"), 50 * index);
				});

				updateGameCount(sortedGames.length);
			}

			function filterGames() {
				if (!games || games.length === 0) return;
				const query = document.getElementById("searchBox").value.toLowerCase();
				const filtered = games.filter((game) =>
					game.name.toLowerCase().includes(query)
				);
				renderGames(filtered);
			}

			function updateGameCount(count) {
				document.getElementById("gameCount").textContent = `Games: ${count}`;
			}
		</script>
	</body>
</html>
